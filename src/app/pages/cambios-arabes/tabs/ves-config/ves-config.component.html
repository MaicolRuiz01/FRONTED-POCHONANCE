<p-card header="Configurar Tasas VES3">
  <div class="ves-balance-chip" *ngIf="saldoVesPesos !== null">
    <span class="ves-balance-label">Saldo VES (en pesos):</span>
    <span class="ves-balance-value">
      {{ saldoVesPesos | number:'1.0-0' }}
    </span>
  </div>

  <hr />
  <br />

  <!-- MODO -->
  <div class="mode-row">
    <p-inputSwitch [(ngModel)]="tasaUnica" (onChange)="onToggleTasaUnica()"></p-inputSwitch>
    <span class="mode-label">
      Usar tasa única
    </span>
  </div>

  <form [formGroup]="form" class="rates-form">
    <div class="rates-grid">
      <div class="rates-header">PESOS</div>
      <div class="rates-header">TASA</div>
      <div class="rates-header">VES</div>

      <!-- FILA 1 (siempre) -->
      <div class="rates-cell pesos-cell">
        {{ pesos1 | number:'1.0-0' }}
      </div>
      <div class="rates-cell">
        <p-inputNumber formControlName="tasa1" [minFractionDigits]="2"></p-inputNumber>
      </div>
      <div class="rates-cell">
        <p-inputNumber formControlName="ves1"></p-inputNumber>
      </div>

      <!-- FILA 2 (solo si NO es tasa única) -->
      <ng-container *ngIf="!tasaUnica">
        <div class="rates-cell pesos-cell">
          {{ pesos2 | number:'1.0-0' }}
        </div>
        <div class="rates-cell">
          <p-inputNumber formControlName="tasa2" [minFractionDigits]="2"></p-inputNumber>
        </div>
        <div class="rates-cell">
          <p-inputNumber formControlName="ves2"></p-inputNumber>
        </div>

        <!-- FILA 3 -->
        <div class="rates-cell pesos-cell">
          {{ pesos3 | number:'1.0-0' }}
        </div>
        <div class="rates-cell">
          <p-inputNumber formControlName="tasa3" [minFractionDigits]="2"></p-inputNumber>
        </div>
        <div class="rates-cell">
          <p-inputNumber formControlName="ves3"></p-inputNumber>
        </div>
      </ng-container>
    </div>

    <div class="buttons-row">
      <button
        pButton
        type="button"
        icon="pi pi-save"
        label="Guardar"
        (click)="save()"
      ></button>

      <button
        pButton
        type="button"
        class="p-button-success"
        icon="pi pi-image"
        [label]="tasaUnica ? 'Generar imagen (tasa única)' : 'Generar imagen'"
        (click)="generateImage()"
      ></button>
    </div>

    <canvas #rateCanvas style="display:none;"></canvas>
  </form>
</p-card>
