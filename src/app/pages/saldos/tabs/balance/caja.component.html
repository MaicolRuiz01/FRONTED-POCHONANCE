<app-mi-table [columns]="columns" [data]="balances">
  <ng-template #actionTemplate let-balance>
    <p-button
      icon="pi pi-search"
      title="Ver Detalles"
      [rounded]="true"
      [text]="true"
      [raised]="true"
      severity="success"
      (click)="showDetails(balance)">
    </p-button>
  </ng-template>
</app-mi-table>

<!-- Template adicional: total cuentas -->
<ng-template pTemplate="content">
  <div class="total-content">
    <i class="pi pi-calculator" style="margin-right: 6px;"></i>
    <strong>Total Cuentas:</strong> {{ totalCuentas | currency:'COP' }}
  </div>
</ng-template>

<!-- Modal: Detalle de Balance -->
<p-dialog [(visible)]="showDetailsModal" [modal]="true" header="Detalle de Balance">
  <ng-template pTemplate="content">
    <div *ngIf="selectedBalance" class="grid gap-3">
      <!-- Fecha y Saldo -->
      <div class="p-col-12 p-md-6">
        <p-card>
          <strong>üìÖ Fecha:</strong> {{ selectedBalance.date }} <br>
          <strong>üí∞ Saldo:</strong> {{ selectedBalance.saldo | currency: 'COP' }}
        </p-card>
      </div>

      <!-- Tasas -->
      <div class="p-col-12 p-md-6">
        <p-card>
          <strong>üìä Tasa Promedio:</strong> {{ selectedBalance.tasaPromedioDelDia }} <br>
          <strong>üè∑Ô∏è Tasa Venta:</strong> {{ selectedBalance.tasaVentaDelDia }}
        </p-card>
      </div>

      <!-- P2P -->
      <div class="p-col-12 p-md-6">
        <p-card>
          <h4>P2P</h4>
          <p><strong>Total (USD):</strong> {{ selectedBalance.totalP2PdelDia | currency: 'USD' }}</p>
          <p><strong>Comisiones (COP):</strong> {{ selectedBalance.comisionesP2PdelDia | currency: 'COP' }}</p>
          <p><strong>4x1000:</strong> {{ selectedBalance.cuatroPorMilDeVentas | currency: 'COP' }}</p>
          <p><strong>Utilidad:</strong> {{ selectedBalance.utilidadP2P | currency: 'COP' }}</p>
        </p-card>
      </div>

      <!-- Ventas Generales -->
      <div class="p-col-12 p-md-6">
        <p-card>
          <h4>Ventas Generales</h4>
          <p><strong>Total (USD):</strong> {{ selectedBalance.totalVentasGeneralesDelDia | currency: 'USD' }}</p>
          <p><strong>Utilidad (COP):</strong> {{ selectedBalance.utilidadVentasGenerales | currency: 'COP' }}</p>
        </p-card>
      </div>
    </div>
  </ng-template>

  <ng-template pTemplate="footer">
    <button pButton label="Inf. adicional" class="p-button-info mt-3" (click)="showAdditionalInfo()"></button>
    <button pButton label="Cerrar" (click)="closeModal()" class="p-button-danger"></button>
  </ng-template>
</p-dialog>
